<!-- add-article.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Add Article</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    body {
      font-family: 'Poppins', sans-serif;
    }

    .main-content {
                max-width: 1100px;
                margin: 20px auto;
                background-color: white;
                min-height: 600px;
                border-radius: 5px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                overflow: hidden;
    }
            
    .toolbar {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 15px 20px;
                background-color: #2E619F;
                color: white;
                border-radius: 4px 4px 0 0;
    }

    .formatting-tools {
            display: flex;
            gap: 20px;
    }
        
    .formatting-tools button {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1rem;
            transition: opacity 0.2s;
    }
        
    .formatting-tools button:hover {
            opacity: 0.8;
    }
        
    .formatting-tools button.active {
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
    }

    .editor {
              padding: 20px;
              min-height: 400px;
              border: none;
              outline: none;
              font-size: 16px;
              line-height: 1.6;
              color: #333;
              resize: none;
              width: 100%;
              font-family: Poppins, sans-serif;
              position: relative;
    }
          
    .editor-container {
              position: relative;

    }
  </style>
</head>
<body class="bg-white text-[#2E619F] font-poppins">

  <!-- Navbar -->
  <nav class="bg-[#2E619F] text-white p-4 md:p-6 sticky top-0 z-50">
    <div class="container mx-auto flex justify-between items-center">
      <div class="flex items-center">
        <img src="Illustrations/Logo.png" alt="GWS logo" class="h-8 md:h-10 w-auto mr-2">
      </div>
      <div class="hidden md:flex space-x-6 items-center">
        <a href="dashboardadmin.html" class="hover:underline hover:text-blue-200 transition">Admin</a>
        <a href="journal.html" class="hover:underline hover:text-blue-200 transition">Journal</a>
        <a href="#" class="hover:underline hover:text-blue-200 transition">Tracker</a>
        <a href="article.html" class="hover:underline hover:text-blue-200 transition">Article</a>
        <a href="addmusic.html" class="hover:underline hover:text-blue-200 transition">Music</a>
        <div class="relative group flex items-center space-x-1">
          <button id="avatar-button" class="focus:outline-none">
            <img src="Illustrations/Generic avatar.png" width="40" height="40" class="rounded-full cursor-pointer">
          </button>
          <span id="username" class="text-white font-bold"></span>
        </div>
      </div>
    </div>
  </nav>

  <!-- Editor Area -->
   <main class="main-content">
    <!-- Toolbar -->
    <div class="toolbar">
      <div class="formatting-tools">
  >     <button title="Bold" onclick="formatText('bold')" id="bold-btn"><i class="fas fa-bold"></i></button>
        <button title="Italic" onclick="formatText('italic')" id="italic-btn"><i class="fas fa-italic"></i></button>
        <button title="Underline" onclick="formatText('underline')" id="underline-btn"><i class="fas fa-underline"></i></button>
        <button title="Bullet List" onclick="formatText('insertUnorderedList')" id="ul-btn"><i class="fas fa-list-ul"></i></button>
        <button title="Numbered List" onclick="formatText('insertOrderedList')" id="ol-btn"><i class="fas fa-list-ol"></i></button>
        <button title="Link" onclick="insertLink()" id="link-btn"><i class="fas fa-link"></i></button>
        <button title="Image" onclick="insertImageFromFile()" id="image-btn"><i class="far fa-image"></i></button>
      </div>
    </div>

    <!-- Editable Area -->
    <div class="editor-container">
      <div class="editor" contenteditable="true">
        <h2><strong>Anxiety Disorder</strong></h2>
        <p>Anxiety Disorder is a lorem ipsum dolor sit amet</p>
      </div>
    </div>

    <!-- Upload Button -->
    <div class="mt-6 flex justify-end">  
      <button onclick="uploadArticle()" class="bg-[#2E619F] text-white px-6 py-2 rounded-full font-semibold hover:bg-blue-800 transition">
        Update
      </button>
    </div>
  </main>

  <script>
    function handleImageUpload(event) {
              const file = event.target.files[0];
              if (file && file.type.startsWith('image/')) {
                  const reader = new FileReader();
                  reader.onload = function(e) {
                      const img = document.createElement('img');
                      img.src = e.target.result;
                      img.style.maxWidth = '100%';
                      img.style.height = 'auto';
                      img.style.margin = '10px 0';
                      
                      // Insert the image at cursor position
                      const selection = window.getSelection();
                      if (selection.rangeCount > 0) {
                          const range = selection.getRangeAt(0);
                          range.deleteContents();
                          range.insertNode(img);
                          range.setStartAfter(img);
                          range.setEndAfter(img);
                          selection.removeAllRanges();
                          selection.addRange(range);
                      } else {
                          document.getElementById('journal-editor').appendChild(img);
                      }
                      
                      togglePlaceholder();
                  };
                  reader.readAsDataURL(file);
              }
              
              // Reset the input
              event.target.value = '';
      }

      function insertLink() {
            const url = prompt('Enter the URL:');
            if (url) {
                formatText('createLink', url);
            }
      }

    function uploadArticle() {
      const content = document.getElementById('editor').innerHTML;
      alert("Article Updated!\n\n" + content);
      // Di implementasi sesungguhnya, bisa kirim ke backend
      window.location.href = 'managearticles.html'
    }

    window.addEventListener('DOMContentLoaded', () => {
      const username = localStorage.getItem('username');
      document.getElementById('username').textContent = username;
    });
  </script>
</body>
</html>
